{"ast":null,"code":"var _regeneratorRuntime = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/createClass.js\").default;\n// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nvar _require = require('./browsingContextTypes'),\n  BrowsingContextInfo = _require.BrowsingContextInfo,\n  NavigationInfo = _require.NavigationInfo;\nvar BrowsingContextInspector = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function BrowsingContextInspector(driver, browsingContextIds) {\n    _classCallCheck(this, BrowsingContextInspector);\n    this._driver = driver;\n    this._browsingContextIds = browsingContextIds;\n  }\n  _createClass(BrowsingContextInspector, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._driver.getBidi();\n            case 2:\n              this.bidi = _context.sent;\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"onBrowsingContextCreated\",\n    value: function () {\n      var _onBrowsingContextCreated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(callback) {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.subscribeAndHandleEvent('browsingContext.contextCreated', callback);\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function onBrowsingContextCreated(_x) {\n        return _onBrowsingContextCreated.apply(this, arguments);\n      }\n      return onBrowsingContextCreated;\n    }()\n  }, {\n    key: \"onDomContentLoaded\",\n    value: function () {\n      var _onDomContentLoaded = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(callback) {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return this.subscribeAndHandleEvent('browsingContext.domContentLoaded', callback);\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function onDomContentLoaded(_x2) {\n        return _onDomContentLoaded.apply(this, arguments);\n      }\n      return onDomContentLoaded;\n    }()\n  }, {\n    key: \"onBrowsingContextLoaded\",\n    value: function () {\n      var _onBrowsingContextLoaded = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(callback) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this.subscribeAndHandleEvent('browsingContext.load', callback);\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function onBrowsingContextLoaded(_x3) {\n        return _onBrowsingContextLoaded.apply(this, arguments);\n      }\n      return onBrowsingContextLoaded;\n    }()\n  }, {\n    key: \"subscribeAndHandleEvent\",\n    value: function () {\n      var _subscribeAndHandleEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(eventType, callback) {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!(this._browsingContextIds != null)) {\n                _context5.next = 5;\n                break;\n              }\n              _context5.next = 3;\n              return this.bidi.subscribe(eventType, this._browsingContextIds);\n            case 3:\n              _context5.next = 7;\n              break;\n            case 5:\n              _context5.next = 7;\n              return this.bidi.subscribe(eventType);\n            case 7:\n              this._on(callback);\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function subscribeAndHandleEvent(_x4, _x5) {\n        return _subscribeAndHandleEvent.apply(this, arguments);\n      }\n      return subscribeAndHandleEvent;\n    }()\n  }, {\n    key: \"_on\",\n    value: function () {\n      var _on2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(callback) {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return this.bidi.socket;\n            case 2:\n              this.ws = _context6.sent;\n              this.ws.on('message', function (event) {\n                var _JSON$parse = JSON.parse(Buffer.from(event.toString())),\n                  params = _JSON$parse.params;\n                if (params) {\n                  var response = null;\n                  if ('navigation' in params) {\n                    response = new NavigationInfo(params.context, params.navigation, params.timestamp, params.url);\n                  } else if ('accepted' in params) {\n                    /* Needs to be updated when browsers implement other events */\n                  } else {\n                    response = new BrowsingContextInfo(params.context, params.url, params.children, params.parent);\n                  }\n                  callback(response);\n                }\n              });\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function _on(_x6) {\n        return _on2.apply(this, arguments);\n      }\n      return _on;\n    }()\n  }]);\n  return BrowsingContextInspector;\n}();\nfunction getBrowsingContextInstance(_x7) {\n  return _getBrowsingContextInstance.apply(this, arguments);\n}\nfunction _getBrowsingContextInstance() {\n  _getBrowsingContextInstance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(driver) {\n    var browsingContextIds,\n      instance,\n      _args7 = arguments;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          browsingContextIds = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : null;\n          instance = new BrowsingContextInspector(driver, browsingContextIds);\n          _context7.next = 4;\n          return instance.init();\n        case 4:\n          return _context7.abrupt(\"return\", instance);\n        case 5:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _getBrowsingContextInstance.apply(this, arguments);\n}\nmodule.exports = getBrowsingContextInstance;","map":{"version":3,"names":["_require","require","BrowsingContextInfo","NavigationInfo","BrowsingContextInspector","driver","browsingContextIds","_classCallCheck","_driver","_browsingContextIds","_createClass","key","value","_init","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","getBidi","bidi","sent","stop","init","apply","arguments","_onBrowsingContextCreated","_callee2","callback","_callee2$","_context2","subscribeAndHandleEvent","onBrowsingContextCreated","_x","_onDomContentLoaded","_callee3","_callee3$","_context3","onDomContentLoaded","_x2","_onBrowsingContextLoaded","_callee4","_callee4$","_context4","onBrowsingContextLoaded","_x3","_subscribeAndHandleEvent","_callee5","eventType","_callee5$","_context5","subscribe","_on","_x4","_x5","_on2","_callee6","_callee6$","_context6","socket","ws","on","event","_JSON$parse","JSON","parse","Buffer","from","toString","params","response","context","navigation","timestamp","url","children","parent","_x6","getBrowsingContextInstance","_x7","_getBrowsingContextInstance","_callee7","instance","_args7","_callee7$","_context7","length","undefined","abrupt","module","exports"],"sources":["D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/selenium-webdriver/bidi/browsingContextInspector.js"],"sourcesContent":["// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nconst {\n  BrowsingContextInfo,\n  NavigationInfo,\n} = require('./browsingContextTypes')\n\nclass BrowsingContextInspector {\n  constructor(driver, browsingContextIds) {\n    this._driver = driver\n    this._browsingContextIds = browsingContextIds\n  }\n\n  async init() {\n    this.bidi = await this._driver.getBidi()\n  }\n\n  async onBrowsingContextCreated(callback) {\n    await this.subscribeAndHandleEvent(\n      'browsingContext.contextCreated',\n      callback\n    )\n  }\n\n  async onDomContentLoaded(callback) {\n    await this.subscribeAndHandleEvent(\n      'browsingContext.domContentLoaded',\n      callback\n    )\n  }\n\n  async onBrowsingContextLoaded(callback) {\n    await this.subscribeAndHandleEvent('browsingContext.load', callback)\n  }\n\n  async subscribeAndHandleEvent(eventType, callback) {\n    if (this._browsingContextIds != null) {\n      await this.bidi.subscribe(eventType, this._browsingContextIds)\n    } else {\n      await this.bidi.subscribe(eventType)\n    }\n    this._on(callback)\n  }\n\n  async _on(callback) {\n    this.ws = await this.bidi.socket\n    this.ws.on('message', (event) => {\n      const { params } = JSON.parse(Buffer.from(event.toString()))\n      if (params) {\n        let response = null\n        if ('navigation' in params) {\n          response = new NavigationInfo(\n            params.context,\n            params.navigation,\n            params.timestamp,\n            params.url\n          )\n        } else if ('accepted' in params) {\n          /* Needs to be updated when browsers implement other events */\n        } else {\n          response = new BrowsingContextInfo(\n            params.context,\n            params.url,\n            params.children,\n            params.parent\n          )\n        }\n        callback(response)\n      }\n    })\n  }\n}\n\nasync function getBrowsingContextInstance(driver, browsingContextIds = null) {\n  let instance = new BrowsingContextInspector(driver, browsingContextIds)\n  await instance.init()\n  return instance\n}\n\nmodule.exports = getBrowsingContextInstance\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}