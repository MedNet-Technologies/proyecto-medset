{"ast":null,"code":"var _regeneratorRuntime = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/@babel/runtime/helpers/createClass.js\").default;\n// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nvar _require = require('./evaluateResult'),\n  EvaluateResultType = _require.EvaluateResultType,\n  EvaluateResultSuccess = _require.EvaluateResultSuccess,\n  EvaluateResultException = _require.EvaluateResultException,\n  ExceptionDetails = _require.ExceptionDetails;\nvar _require2 = require('./realmInfo'),\n  RealmInfo = _require2.RealmInfo;\nvar _require3 = require('./protocolValue'),\n  RemoteValue = _require3.RemoteValue;\nvar _require4 = require('../lib/error'),\n  WebDriverError = _require4.WebDriverError;\nvar ScriptManager = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function ScriptManager(driver) {\n    _classCallCheck(this, ScriptManager);\n    this._driver = driver;\n  }\n  _createClass(ScriptManager, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(browsingContextId) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._driver.getCapabilities();\n            case 2:\n              if (_context.sent.get('webSocketUrl')) {\n                _context.next = 4;\n                break;\n              }\n              throw Error('WebDriver instance must support BiDi protocol');\n            case 4:\n              _context.next = 6;\n              return this._driver.getBidi();\n            case 6:\n              this.bidi = _context.sent;\n              this._browsingContextId = browsingContextId;\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"disownRealmScript\",\n    value: function () {\n      var _disownRealmScript = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(realmId, handles) {\n        var params;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              params = {\n                method: 'script.disown',\n                params: {\n                  handles: handles,\n                  target: {\n                    realm: realmId\n                  }\n                }\n              };\n              _context2.next = 3;\n              return this.bidi.send(params);\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function disownRealmScript(_x2, _x3) {\n        return _disownRealmScript.apply(this, arguments);\n      }\n      return disownRealmScript;\n    }()\n  }, {\n    key: \"disownBrowsingContextScript\",\n    value: function () {\n      var _disownBrowsingContextScript = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(browsingContextId, handles) {\n        var sandbox,\n          params,\n          _args3 = arguments;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              sandbox = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : null;\n              params = {\n                method: 'script.disown',\n                params: {\n                  handles: handles,\n                  target: {\n                    context: browsingContextId\n                  }\n                }\n              };\n              if (sandbox != null) {\n                params.params.target['sandbox'] = sandbox;\n              }\n              _context3.next = 5;\n              return this.bidi.send(params);\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function disownBrowsingContextScript(_x4, _x5) {\n        return _disownBrowsingContextScript.apply(this, arguments);\n      }\n      return disownBrowsingContextScript;\n    }()\n  }, {\n    key: \"callFunctionInRealm\",\n    value: function () {\n      var _callFunctionInRealm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(realmId, functionDeclaration, awaitPromise) {\n        var argumentValueList,\n          thisParameter,\n          resultOwnership,\n          params,\n          command,\n          response,\n          _args4 = arguments;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              argumentValueList = _args4.length > 3 && _args4[3] !== undefined ? _args4[3] : null;\n              thisParameter = _args4.length > 4 && _args4[4] !== undefined ? _args4[4] : null;\n              resultOwnership = _args4.length > 5 && _args4[5] !== undefined ? _args4[5] : null;\n              params = this.getCallFunctionParams('realm', realmId, null, functionDeclaration, awaitPromise, argumentValueList, thisParameter, resultOwnership);\n              command = {\n                method: 'script.callFunction',\n                params: params\n              };\n              _context4.next = 7;\n              return this.bidi.send(command);\n            case 7:\n              response = _context4.sent;\n              return _context4.abrupt(\"return\", this.createEvaluateResult(response));\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function callFunctionInRealm(_x6, _x7, _x8) {\n        return _callFunctionInRealm.apply(this, arguments);\n      }\n      return callFunctionInRealm;\n    }()\n  }, {\n    key: \"callFunctionInBrowsingContext\",\n    value: function () {\n      var _callFunctionInBrowsingContext = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(browsingContextId, functionDeclaration, awaitPromise) {\n        var argumentValueList,\n          thisParameter,\n          resultOwnership,\n          sandbox,\n          params,\n          command,\n          response,\n          _args5 = arguments;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              argumentValueList = _args5.length > 3 && _args5[3] !== undefined ? _args5[3] : null;\n              thisParameter = _args5.length > 4 && _args5[4] !== undefined ? _args5[4] : null;\n              resultOwnership = _args5.length > 5 && _args5[5] !== undefined ? _args5[5] : null;\n              sandbox = _args5.length > 6 && _args5[6] !== undefined ? _args5[6] : null;\n              params = this.getCallFunctionParams('contextTarget', browsingContextId, sandbox, functionDeclaration, awaitPromise, argumentValueList, thisParameter, resultOwnership);\n              command = {\n                method: 'script.callFunction',\n                params: params\n              };\n              _context5.next = 8;\n              return this.bidi.send(command);\n            case 8:\n              response = _context5.sent;\n              return _context5.abrupt(\"return\", this.createEvaluateResult(response));\n            case 10:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function callFunctionInBrowsingContext(_x9, _x10, _x11) {\n        return _callFunctionInBrowsingContext.apply(this, arguments);\n      }\n      return callFunctionInBrowsingContext;\n    }()\n  }, {\n    key: \"evaluateFunctionInRealm\",\n    value: function () {\n      var _evaluateFunctionInRealm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(realmId, expression, awaitPromise) {\n        var resultOwnership,\n          params,\n          command,\n          response,\n          _args6 = arguments;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              resultOwnership = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : null;\n              params = this.getEvaluateParams('realm', realmId, null, expression, awaitPromise, resultOwnership);\n              command = {\n                method: 'script.evaluate',\n                params: params\n              };\n              _context6.next = 5;\n              return this.bidi.send(command);\n            case 5:\n              response = _context6.sent;\n              return _context6.abrupt(\"return\", this.createEvaluateResult(response));\n            case 7:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function evaluateFunctionInRealm(_x12, _x13, _x14) {\n        return _evaluateFunctionInRealm.apply(this, arguments);\n      }\n      return evaluateFunctionInRealm;\n    }()\n  }, {\n    key: \"evaluateFunctionInBrowsingContext\",\n    value: function () {\n      var _evaluateFunctionInBrowsingContext = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(browsingContextId, expression, awaitPromise) {\n        var resultOwnership,\n          sandbox,\n          params,\n          command,\n          response,\n          _args7 = arguments;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              resultOwnership = _args7.length > 3 && _args7[3] !== undefined ? _args7[3] : null;\n              sandbox = _args7.length > 4 && _args7[4] !== undefined ? _args7[4] : null;\n              params = this.getEvaluateParams('contextTarget', browsingContextId, sandbox, expression, awaitPromise, resultOwnership);\n              command = {\n                method: 'script.evaluate',\n                params: params\n              };\n              _context7.next = 6;\n              return this.bidi.send(command);\n            case 6:\n              response = _context7.sent;\n              return _context7.abrupt(\"return\", this.createEvaluateResult(response));\n            case 8:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function evaluateFunctionInBrowsingContext(_x15, _x16, _x17) {\n        return _evaluateFunctionInBrowsingContext.apply(this, arguments);\n      }\n      return evaluateFunctionInBrowsingContext;\n    }()\n  }, {\n    key: \"addPreloadScript\",\n    value: function () {\n      var _addPreloadScript = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(functionDeclaration) {\n        var argumentValueList,\n          sandbox,\n          params,\n          command,\n          response,\n          _args8 = arguments;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              argumentValueList = _args8.length > 1 && _args8[1] !== undefined ? _args8[1] : null;\n              sandbox = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : null;\n              params = {\n                functionDeclaration: functionDeclaration,\n                arguments: argumentValueList,\n                sandbox: sandbox\n              };\n              command = {\n                method: 'script.addPreloadScript',\n                params: params\n              };\n              _context8.next = 6;\n              return this.bidi.send(command);\n            case 6:\n              response = _context8.sent;\n              return _context8.abrupt(\"return\", response.result.script);\n            case 8:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function addPreloadScript(_x18) {\n        return _addPreloadScript.apply(this, arguments);\n      }\n      return addPreloadScript;\n    }()\n  }, {\n    key: \"removePreloadScript\",\n    value: function () {\n      var _removePreloadScript = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(script) {\n        var params, command, response;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              params = {\n                script: script\n              };\n              command = {\n                method: 'script.removePreloadScript',\n                params: params\n              };\n              _context9.next = 4;\n              return this.bidi.send(command);\n            case 4:\n              response = _context9.sent;\n              if (!('error' in response)) {\n                _context9.next = 7;\n                break;\n              }\n              throw new WebDriverError(response.error);\n            case 7:\n              return _context9.abrupt(\"return\", response.result);\n            case 8:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function removePreloadScript(_x19) {\n        return _removePreloadScript.apply(this, arguments);\n      }\n      return removePreloadScript;\n    }()\n  }, {\n    key: \"getCallFunctionParams\",\n    value: function getCallFunctionParams(targetType, id, sandbox, functionDeclaration, awaitPromise) {\n      var argumentValueList = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var thisParameter = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n      var resultOwnership = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : null;\n      var params = {\n        functionDeclaration: functionDeclaration,\n        awaitPromise: awaitPromise\n      };\n      if (targetType === 'contextTarget') {\n        if (sandbox != null) {\n          params['target'] = {\n            context: id,\n            sandbox: sandbox\n          };\n        } else {\n          params['target'] = {\n            context: id\n          };\n        }\n      } else {\n        params['target'] = {\n          realm: id\n        };\n      }\n      if (argumentValueList != null) {\n        var argumentParams = [];\n        argumentValueList.forEach(function (argumentValue) {\n          argumentParams.push(argumentValue.asMap());\n        });\n        params['arguments'] = argumentParams;\n      }\n      if (thisParameter != null) {\n        params['this'] = thisParameter;\n      }\n      if (resultOwnership != null) {\n        params['resultOwnership'] = resultOwnership;\n      }\n      return params;\n    }\n  }, {\n    key: \"getEvaluateParams\",\n    value: function getEvaluateParams(targetType, id, sandbox, expression, awaitPromise) {\n      var resultOwnership = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : null;\n      var params = {\n        expression: expression,\n        awaitPromise: awaitPromise\n      };\n      if (targetType === 'contextTarget') {\n        if (sandbox != null) {\n          params['target'] = {\n            context: id,\n            sandbox: sandbox\n          };\n        } else {\n          params['target'] = {\n            context: id\n          };\n        }\n      } else {\n        params['target'] = {\n          realm: id\n        };\n      }\n      if (resultOwnership != null) {\n        params['resultOwnership'] = resultOwnership;\n      }\n      return params;\n    }\n  }, {\n    key: \"createEvaluateResult\",\n    value: function createEvaluateResult(response) {\n      var type = response.result.type;\n      var realmId = response.result.realm;\n      var evaluateResult;\n      if (type === EvaluateResultType.SUCCESS) {\n        var result = response.result.result;\n        evaluateResult = new EvaluateResultSuccess(realmId, new RemoteValue(result));\n      } else {\n        var exceptionDetails = response.result.exceptionDetails;\n        evaluateResult = new EvaluateResultException(realmId, new ExceptionDetails(exceptionDetails));\n      }\n      return evaluateResult;\n    }\n  }, {\n    key: \"realmInfoMapper\",\n    value: function realmInfoMapper(realms) {\n      var realmsList = [];\n      realms.forEach(function (realm) {\n        realmsList.push(RealmInfo.fromJson(realm));\n      });\n      return realmsList;\n    }\n  }, {\n    key: \"getAllRealms\",\n    value: function () {\n      var _getAllRealms = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var command, response;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              command = {\n                method: 'script.getRealms',\n                params: {}\n              };\n              _context10.next = 3;\n              return this.bidi.send(command);\n            case 3:\n              response = _context10.sent;\n              return _context10.abrupt(\"return\", this.realmInfoMapper(response.result.realms));\n            case 5:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function getAllRealms() {\n        return _getAllRealms.apply(this, arguments);\n      }\n      return getAllRealms;\n    }()\n  }, {\n    key: \"getRealmsByType\",\n    value: function () {\n      var _getRealmsByType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(type) {\n        var command, response;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              command = {\n                method: 'script.getRealms',\n                params: {\n                  type: type\n                }\n              };\n              _context11.next = 3;\n              return this.bidi.send(command);\n            case 3:\n              response = _context11.sent;\n              return _context11.abrupt(\"return\", this.realmInfoMapper(response.result.realms));\n            case 5:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function getRealmsByType(_x20) {\n        return _getRealmsByType.apply(this, arguments);\n      }\n      return getRealmsByType;\n    }()\n  }, {\n    key: \"getRealmsInBrowsingContext\",\n    value: function () {\n      var _getRealmsInBrowsingContext = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(browsingContext) {\n        var command, response;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              command = {\n                method: 'script.getRealms',\n                params: {\n                  context: browsingContext\n                }\n              };\n              _context12.next = 3;\n              return this.bidi.send(command);\n            case 3:\n              response = _context12.sent;\n              return _context12.abrupt(\"return\", this.realmInfoMapper(response.result.realms));\n            case 5:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function getRealmsInBrowsingContext(_x21) {\n        return _getRealmsInBrowsingContext.apply(this, arguments);\n      }\n      return getRealmsInBrowsingContext;\n    }()\n  }, {\n    key: \"getRealmsInBrowsingContextByType\",\n    value: function () {\n      var _getRealmsInBrowsingContextByType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(browsingContext, type) {\n        var command, response;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              command = {\n                method: 'script.getRealms',\n                params: {\n                  context: browsingContext,\n                  type: type\n                }\n              };\n              _context13.next = 3;\n              return this.bidi.send(command);\n            case 3:\n              response = _context13.sent;\n              return _context13.abrupt(\"return\", this.realmInfoMapper(response.result.realms));\n            case 5:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function getRealmsInBrowsingContextByType(_x22, _x23) {\n        return _getRealmsInBrowsingContextByType.apply(this, arguments);\n      }\n      return getRealmsInBrowsingContextByType;\n    }()\n  }]);\n  return ScriptManager;\n}();\nfunction getScriptManagerInstance(_x24, _x25) {\n  return _getScriptManagerInstance.apply(this, arguments);\n}\nfunction _getScriptManagerInstance() {\n  _getScriptManagerInstance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(browsingContextId, driver) {\n    var instance;\n    return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          instance = new ScriptManager(driver);\n          _context14.next = 3;\n          return instance.init(browsingContextId);\n        case 3:\n          return _context14.abrupt(\"return\", instance);\n        case 4:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14);\n  }));\n  return _getScriptManagerInstance.apply(this, arguments);\n}\nmodule.exports = getScriptManagerInstance;","map":{"version":3,"names":["_require","require","EvaluateResultType","EvaluateResultSuccess","EvaluateResultException","ExceptionDetails","_require2","RealmInfo","_require3","RemoteValue","_require4","WebDriverError","ScriptManager","driver","_classCallCheck","_driver","_createClass","key","value","_init","_asyncToGenerator","_regeneratorRuntime","mark","_callee","browsingContextId","wrap","_callee$","_context","prev","next","getCapabilities","sent","get","Error","getBidi","bidi","_browsingContextId","stop","init","_x","apply","arguments","_disownRealmScript","_callee2","realmId","handles","params","_callee2$","_context2","method","target","realm","send","disownRealmScript","_x2","_x3","_disownBrowsingContextScript","_callee3","sandbox","_args3","_callee3$","_context3","length","undefined","context","disownBrowsingContextScript","_x4","_x5","_callFunctionInRealm","_callee4","functionDeclaration","awaitPromise","argumentValueList","thisParameter","resultOwnership","command","response","_args4","_callee4$","_context4","getCallFunctionParams","abrupt","createEvaluateResult","callFunctionInRealm","_x6","_x7","_x8","_callFunctionInBrowsingContext","_callee5","_args5","_callee5$","_context5","callFunctionInBrowsingContext","_x9","_x10","_x11","_evaluateFunctionInRealm","_callee6","expression","_args6","_callee6$","_context6","getEvaluateParams","evaluateFunctionInRealm","_x12","_x13","_x14","_evaluateFunctionInBrowsingContext","_callee7","_args7","_callee7$","_context7","evaluateFunctionInBrowsingContext","_x15","_x16","_x17","_addPreloadScript","_callee8","_args8","_callee8$","_context8","result","script","addPreloadScript","_x18","_removePreloadScript","_callee9","_callee9$","_context9","error","removePreloadScript","_x19","targetType","id","argumentParams","forEach","argumentValue","push","asMap","type","evaluateResult","SUCCESS","exceptionDetails","realmInfoMapper","realms","realmsList","fromJson","_getAllRealms","_callee10","_callee10$","_context10","getAllRealms","_getRealmsByType","_callee11","_callee11$","_context11","getRealmsByType","_x20","_getRealmsInBrowsingContext","_callee12","browsingContext","_callee12$","_context12","getRealmsInBrowsingContext","_x21","_getRealmsInBrowsingContextByType","_callee13","_callee13$","_context13","getRealmsInBrowsingContextByType","_x22","_x23","getScriptManagerInstance","_x24","_x25","_getScriptManagerInstance","_callee14","instance","_callee14$","_context14","module","exports"],"sources":["D:/Guts/Documents/GitHub/proyecto-medset/medset/node_modules/selenium-webdriver/bidi/scriptManager.js"],"sourcesContent":["// Licensed to the Software Freedom Conservancy (SFC) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The SFC licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\nconst {\n  EvaluateResultType,\n  EvaluateResultSuccess,\n  EvaluateResultException,\n  ExceptionDetails,\n} = require('./evaluateResult')\nconst { RealmInfo } = require('./realmInfo')\nconst { RemoteValue } = require('./protocolValue')\nconst { WebDriverError } = require('../lib/error')\n\nclass ScriptManager {\n  constructor(driver) {\n    this._driver = driver\n  }\n\n  async init(browsingContextId) {\n    if (!(await this._driver.getCapabilities()).get('webSocketUrl')) {\n      throw Error('WebDriver instance must support BiDi protocol')\n    }\n\n    this.bidi = await this._driver.getBidi()\n    this._browsingContextId = browsingContextId\n  }\n\n  async disownRealmScript(realmId, handles) {\n    const params = {\n      method: 'script.disown',\n      params: {\n        handles: handles,\n        target: {\n          realm: realmId,\n        },\n      },\n    }\n\n    await this.bidi.send(params)\n  }\n\n  async disownBrowsingContextScript(\n    browsingContextId,\n    handles,\n    sandbox = null\n  ) {\n    const params = {\n      method: 'script.disown',\n      params: {\n        handles: handles,\n        target: {\n          context: browsingContextId,\n        },\n      },\n    }\n\n    if (sandbox != null) {\n      params.params.target['sandbox'] = sandbox\n    }\n\n    await this.bidi.send(params)\n  }\n\n  async callFunctionInRealm(\n    realmId,\n    functionDeclaration,\n    awaitPromise,\n    argumentValueList = null,\n    thisParameter = null,\n    resultOwnership = null\n  ) {\n    const params = this.getCallFunctionParams(\n      'realm',\n      realmId,\n      null,\n      functionDeclaration,\n      awaitPromise,\n      argumentValueList,\n      thisParameter,\n      resultOwnership\n    )\n\n    const command = {\n      method: 'script.callFunction',\n      params,\n    }\n\n    let response = await this.bidi.send(command)\n    return this.createEvaluateResult(response)\n  }\n\n  async callFunctionInBrowsingContext(\n    browsingContextId,\n    functionDeclaration,\n    awaitPromise,\n    argumentValueList = null,\n    thisParameter = null,\n    resultOwnership = null,\n    sandbox = null\n  ) {\n    const params = this.getCallFunctionParams(\n      'contextTarget',\n      browsingContextId,\n      sandbox,\n      functionDeclaration,\n      awaitPromise,\n      argumentValueList,\n      thisParameter,\n      resultOwnership\n    )\n\n    const command = {\n      method: 'script.callFunction',\n      params,\n    }\n    const response = await this.bidi.send(command)\n    return this.createEvaluateResult(response)\n  }\n\n  async evaluateFunctionInRealm(\n    realmId,\n    expression,\n    awaitPromise,\n    resultOwnership = null\n  ) {\n    const params = this.getEvaluateParams(\n      'realm',\n      realmId,\n      null,\n      expression,\n      awaitPromise,\n      resultOwnership\n    )\n\n    const command = {\n      method: 'script.evaluate',\n      params,\n    }\n\n    let response = await this.bidi.send(command)\n    return this.createEvaluateResult(response)\n  }\n\n  async evaluateFunctionInBrowsingContext(\n    browsingContextId,\n    expression,\n    awaitPromise,\n    resultOwnership = null,\n    sandbox = null\n  ) {\n    const params = this.getEvaluateParams(\n      'contextTarget',\n      browsingContextId,\n      sandbox,\n      expression,\n      awaitPromise,\n      resultOwnership\n    )\n\n    const command = {\n      method: 'script.evaluate',\n      params,\n    }\n\n    let response = await this.bidi.send(command)\n    return this.createEvaluateResult(response)\n  }\n\n  async addPreloadScript(\n    functionDeclaration,\n    argumentValueList = null,\n    sandbox = null\n  ) {\n    const params = {\n      functionDeclaration: functionDeclaration,\n      arguments: argumentValueList,\n      sandbox: sandbox,\n    }\n\n    const command = {\n      method: 'script.addPreloadScript',\n      params,\n    }\n\n    let response = await this.bidi.send(command)\n    return response.result.script\n  }\n\n  async removePreloadScript(script) {\n    const params = { script: script }\n    const command = {\n      method: 'script.removePreloadScript',\n      params,\n    }\n    let response = await this.bidi.send(command)\n    if ('error' in response) {\n      throw new WebDriverError(response.error)\n    }\n    return response.result\n  }\n\n  getCallFunctionParams(\n    targetType,\n    id,\n    sandbox,\n    functionDeclaration,\n    awaitPromise,\n    argumentValueList = null,\n    thisParameter = null,\n    resultOwnership = null\n  ) {\n    const params = {\n      functionDeclaration: functionDeclaration,\n      awaitPromise: awaitPromise,\n    }\n    if (targetType === 'contextTarget') {\n      if (sandbox != null) {\n        params['target'] = { context: id, sandbox: sandbox }\n      } else {\n        params['target'] = { context: id }\n      }\n    } else {\n      params['target'] = { realm: id }\n    }\n\n    if (argumentValueList != null) {\n      let argumentParams = []\n      argumentValueList.forEach((argumentValue) => {\n        argumentParams.push(argumentValue.asMap())\n      })\n      params['arguments'] = argumentParams\n    }\n\n    if (thisParameter != null) {\n      params['this'] = thisParameter\n    }\n\n    if (resultOwnership != null) {\n      params['resultOwnership'] = resultOwnership\n    }\n\n    return params\n  }\n\n  getEvaluateParams(\n    targetType,\n    id,\n    sandbox,\n    expression,\n    awaitPromise,\n    resultOwnership = null\n  ) {\n    const params = {\n      expression: expression,\n      awaitPromise: awaitPromise,\n    }\n    if (targetType === 'contextTarget') {\n      if (sandbox != null) {\n        params['target'] = { context: id, sandbox: sandbox }\n      } else {\n        params['target'] = { context: id }\n      }\n    } else {\n      params['target'] = { realm: id }\n    }\n    if (resultOwnership != null) {\n      params['resultOwnership'] = resultOwnership\n    }\n\n    return params\n  }\n\n  createEvaluateResult(response) {\n    var type = response.result.type\n    var realmId = response.result.realm\n    var evaluateResult\n\n    if (type === EvaluateResultType.SUCCESS) {\n      var result = response.result.result\n      evaluateResult = new EvaluateResultSuccess(\n        realmId,\n        new RemoteValue(result)\n      )\n    } else {\n      var exceptionDetails = response.result.exceptionDetails\n      evaluateResult = new EvaluateResultException(\n        realmId,\n        new ExceptionDetails(exceptionDetails)\n      )\n    }\n    return evaluateResult\n  }\n\n  realmInfoMapper(realms) {\n    var realmsList = []\n    realms.forEach((realm) => {\n      realmsList.push(RealmInfo.fromJson(realm))\n    })\n    return realmsList\n  }\n\n  async getAllRealms() {\n    const command = {\n      method: 'script.getRealms',\n      params: {},\n    }\n    let response = await this.bidi.send(command)\n    return this.realmInfoMapper(response.result.realms)\n  }\n\n  async getRealmsByType(type) {\n    const command = {\n      method: 'script.getRealms',\n      params: { type: type },\n    }\n    let response = await this.bidi.send(command)\n    return this.realmInfoMapper(response.result.realms)\n  }\n\n  async getRealmsInBrowsingContext(browsingContext) {\n    const command = {\n      method: 'script.getRealms',\n      params: { context: browsingContext },\n    }\n    let response = await this.bidi.send(command)\n    return this.realmInfoMapper(response.result.realms)\n  }\n\n  async getRealmsInBrowsingContextByType(browsingContext, type) {\n    const command = {\n      method: 'script.getRealms',\n      params: { context: browsingContext, type: type },\n    }\n    let response = await this.bidi.send(command)\n    return this.realmInfoMapper(response.result.realms)\n  }\n}\n\nasync function getScriptManagerInstance(browsingContextId, driver) {\n  let instance = new ScriptManager(driver)\n  await instance.init(browsingContextId)\n  return instance\n}\n\nmodule.exports = getScriptManagerInstance\n"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAAA,QAAA,GAKIC,OAAO,CAAC,kBAAkB,CAAC;EAJ7BC,kBAAkB,GAAAF,QAAA,CAAlBE,kBAAkB;EAClBC,qBAAqB,GAAAH,QAAA,CAArBG,qBAAqB;EACrBC,uBAAuB,GAAAJ,QAAA,CAAvBI,uBAAuB;EACvBC,gBAAgB,GAAAL,QAAA,CAAhBK,gBAAgB;AAElB,IAAAC,SAAA,GAAsBL,OAAO,CAAC,aAAa,CAAC;EAApCM,SAAS,GAAAD,SAAA,CAATC,SAAS;AACjB,IAAAC,SAAA,GAAwBP,OAAO,CAAC,iBAAiB,CAAC;EAA1CQ,WAAW,GAAAD,SAAA,CAAXC,WAAW;AACnB,IAAAC,SAAA,GAA2BT,OAAO,CAAC,cAAc,CAAC;EAA1CU,cAAc,GAAAD,SAAA,CAAdC,cAAc;AAA4B,IAE5CC,aAAa;EAAA;;EACjB,SAAAA,cAAYC,MAAM,EAAE;IAAAC,eAAA,OAAAF,aAAA;IAClB,IAAI,CAACG,OAAO,GAAGF,MAAM;EACvB;EAACG,YAAA,CAAAJ,aAAA;IAAAK,GAAA;IAAAC,KAAA;MAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAC,QAAWC,iBAAiB;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACd,IAAI,CAACd,OAAO,CAACe,eAAe,CAAC,CAAC;YAAA;cAAA,IAAAH,QAAA,CAAAI,IAAA,CAAEC,GAAG,CAAC,cAAc;gBAAAL,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,MACtDI,KAAK,CAAC,+CAA+C,CAAC;YAAA;cAAAN,QAAA,CAAAE,IAAA;cAAA,OAG5C,IAAI,CAACd,OAAO,CAACmB,OAAO,CAAC,CAAC;YAAA;cAAxC,IAAI,CAACC,IAAI,GAAAR,QAAA,CAAAI,IAAA;cACT,IAAI,CAACK,kBAAkB,GAAGZ,iBAAiB;YAAA;YAAA;cAAA,OAAAG,QAAA,CAAAU,IAAA;UAAA;QAAA,GAAAd,OAAA;MAAA,CAC5C;MAAA,SAAAe,KAAAC,EAAA;QAAA,OAAApB,KAAA,CAAAqB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAH,IAAA;IAAA;EAAA;IAAArB,GAAA;IAAAC,KAAA;MAAA,IAAAwB,kBAAA,GAAAtB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAqB,SAAwBC,OAAO,EAAEC,OAAO;QAAA,IAAAC,MAAA;QAAA,OAAAzB,mBAAA,GAAAI,IAAA,UAAAsB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAApB,IAAA,GAAAoB,SAAA,CAAAnB,IAAA;YAAA;cAChCiB,MAAM,GAAG;gBACbG,MAAM,EAAE,eAAe;gBACvBH,MAAM,EAAE;kBACND,OAAO,EAAEA,OAAO;kBAChBK,MAAM,EAAE;oBACNC,KAAK,EAAEP;kBACT;gBACF;cACF,CAAC;cAAAI,SAAA,CAAAnB,IAAA;cAAA,OAEK,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACN,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAE,SAAA,CAAAX,IAAA;UAAA;QAAA,GAAAM,QAAA;MAAA,CAC7B;MAAA,SAAAU,kBAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAb,kBAAA,CAAAF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAY,iBAAA;IAAA;EAAA;IAAApC,GAAA;IAAAC,KAAA;MAAA,IAAAsC,4BAAA,GAAApC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAmC,SACEjC,iBAAiB,EACjBqB,OAAO;QAAA,IAAAa,OAAA;UAAAZ,MAAA;UAAAa,MAAA,GAAAlB,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAAmC,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAjC,IAAA,GAAAiC,SAAA,CAAAhC,IAAA;YAAA;cACP6B,OAAO,GAAAC,MAAA,CAAAG,MAAA,QAAAH,MAAA,QAAAI,SAAA,GAAAJ,MAAA,MAAG,IAAI;cAERb,MAAM,GAAG;gBACbG,MAAM,EAAE,eAAe;gBACvBH,MAAM,EAAE;kBACND,OAAO,EAAEA,OAAO;kBAChBK,MAAM,EAAE;oBACNc,OAAO,EAAExC;kBACX;gBACF;cACF,CAAC;cAED,IAAIkC,OAAO,IAAI,IAAI,EAAE;gBACnBZ,MAAM,CAACA,MAAM,CAACI,MAAM,CAAC,SAAS,CAAC,GAAGQ,OAAO;cAC3C;cAACG,SAAA,CAAAhC,IAAA;cAAA,OAEK,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACN,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAe,SAAA,CAAAxB,IAAA;UAAA;QAAA,GAAAoB,QAAA;MAAA,CAC7B;MAAA,SAAAQ,4BAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAX,4BAAA,CAAAhB,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAwB,2BAAA;IAAA;EAAA;IAAAhD,GAAA;IAAAC,KAAA;MAAA,IAAAkD,oBAAA,GAAAhD,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAA+C,SACEzB,OAAO,EACP0B,mBAAmB,EACnBC,YAAY;QAAA,IAAAC,iBAAA;UAAAC,aAAA;UAAAC,eAAA;UAAA5B,MAAA;UAAA6B,OAAA;UAAAC,QAAA;UAAAC,MAAA,GAAApC,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAAqD,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAnD,IAAA,GAAAmD,SAAA,CAAAlD,IAAA;YAAA;cACZ2C,iBAAiB,GAAAK,MAAA,CAAAf,MAAA,QAAAe,MAAA,QAAAd,SAAA,GAAAc,MAAA,MAAG,IAAI;cACxBJ,aAAa,GAAAI,MAAA,CAAAf,MAAA,QAAAe,MAAA,QAAAd,SAAA,GAAAc,MAAA,MAAG,IAAI;cACpBH,eAAe,GAAAG,MAAA,CAAAf,MAAA,QAAAe,MAAA,QAAAd,SAAA,GAAAc,MAAA,MAAG,IAAI;cAEhB/B,MAAM,GAAG,IAAI,CAACkC,qBAAqB,CACvC,OAAO,EACPpC,OAAO,EACP,IAAI,EACJ0B,mBAAmB,EACnBC,YAAY,EACZC,iBAAiB,EACjBC,aAAa,EACbC,eACF,CAAC;cAEKC,OAAO,GAAG;gBACd1B,MAAM,EAAE,qBAAqB;gBAC7BH,MAAM,EAANA;cACF,CAAC;cAAAiC,SAAA,CAAAlD,IAAA;cAAA,OAEoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAG,SAAA,CAAAhD,IAAA;cAAA,OAAAgD,SAAA,CAAAE,MAAA,WACL,IAAI,CAACC,oBAAoB,CAACN,QAAQ,CAAC;YAAA;YAAA;cAAA,OAAAG,SAAA,CAAA1C,IAAA;UAAA;QAAA,GAAAgC,QAAA;MAAA,CAC3C;MAAA,SAAAc,oBAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;QAAA,OAAAlB,oBAAA,CAAA5B,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAA0C,mBAAA;IAAA;EAAA;IAAAlE,GAAA;IAAAC,KAAA;MAAA,IAAAqE,8BAAA,GAAAnE,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAkE,SACEhE,iBAAiB,EACjB8C,mBAAmB,EACnBC,YAAY;QAAA,IAAAC,iBAAA;UAAAC,aAAA;UAAAC,eAAA;UAAAhB,OAAA;UAAAZ,MAAA;UAAA6B,OAAA;UAAAC,QAAA;UAAAa,MAAA,GAAAhD,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAAiE,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA/D,IAAA,GAAA+D,SAAA,CAAA9D,IAAA;YAAA;cACZ2C,iBAAiB,GAAAiB,MAAA,CAAA3B,MAAA,QAAA2B,MAAA,QAAA1B,SAAA,GAAA0B,MAAA,MAAG,IAAI;cACxBhB,aAAa,GAAAgB,MAAA,CAAA3B,MAAA,QAAA2B,MAAA,QAAA1B,SAAA,GAAA0B,MAAA,MAAG,IAAI;cACpBf,eAAe,GAAAe,MAAA,CAAA3B,MAAA,QAAA2B,MAAA,QAAA1B,SAAA,GAAA0B,MAAA,MAAG,IAAI;cACtB/B,OAAO,GAAA+B,MAAA,CAAA3B,MAAA,QAAA2B,MAAA,QAAA1B,SAAA,GAAA0B,MAAA,MAAG,IAAI;cAER3C,MAAM,GAAG,IAAI,CAACkC,qBAAqB,CACvC,eAAe,EACfxD,iBAAiB,EACjBkC,OAAO,EACPY,mBAAmB,EACnBC,YAAY,EACZC,iBAAiB,EACjBC,aAAa,EACbC,eACF,CAAC;cAEKC,OAAO,GAAG;gBACd1B,MAAM,EAAE,qBAAqB;gBAC7BH,MAAM,EAANA;cACF,CAAC;cAAA6C,SAAA,CAAA9D,IAAA;cAAA,OACsB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAe,SAAA,CAAA5D,IAAA;cAAA,OAAA4D,SAAA,CAAAV,MAAA,WACP,IAAI,CAACC,oBAAoB,CAACN,QAAQ,CAAC;YAAA;YAAA;cAAA,OAAAe,SAAA,CAAAtD,IAAA;UAAA;QAAA,GAAAmD,QAAA;MAAA,CAC3C;MAAA,SAAAI,8BAAAC,GAAA,EAAAC,IAAA,EAAAC,IAAA;QAAA,OAAAR,8BAAA,CAAA/C,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAmD,6BAAA;IAAA;EAAA;IAAA3E,GAAA;IAAAC,KAAA;MAAA,IAAA8E,wBAAA,GAAA5E,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAA2E,SACErD,OAAO,EACPsD,UAAU,EACV3B,YAAY;QAAA,IAAAG,eAAA;UAAA5B,MAAA;UAAA6B,OAAA;UAAAC,QAAA;UAAAuB,MAAA,GAAA1D,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAA2E,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAzE,IAAA,GAAAyE,SAAA,CAAAxE,IAAA;YAAA;cACZ6C,eAAe,GAAAyB,MAAA,CAAArC,MAAA,QAAAqC,MAAA,QAAApC,SAAA,GAAAoC,MAAA,MAAG,IAAI;cAEhBrD,MAAM,GAAG,IAAI,CAACwD,iBAAiB,CACnC,OAAO,EACP1D,OAAO,EACP,IAAI,EACJsD,UAAU,EACV3B,YAAY,EACZG,eACF,CAAC;cAEKC,OAAO,GAAG;gBACd1B,MAAM,EAAE,iBAAiB;gBACzBH,MAAM,EAANA;cACF,CAAC;cAAAuD,SAAA,CAAAxE,IAAA;cAAA,OAEoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAyB,SAAA,CAAAtE,IAAA;cAAA,OAAAsE,SAAA,CAAApB,MAAA,WACL,IAAI,CAACC,oBAAoB,CAACN,QAAQ,CAAC;YAAA;YAAA;cAAA,OAAAyB,SAAA,CAAAhE,IAAA;UAAA;QAAA,GAAA4D,QAAA;MAAA,CAC3C;MAAA,SAAAM,wBAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA;QAAA,OAAAV,wBAAA,CAAAxD,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAA8D,uBAAA;IAAA;EAAA;IAAAtF,GAAA;IAAAC,KAAA;MAAA,IAAAyF,kCAAA,GAAAvF,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAsF,SACEpF,iBAAiB,EACjB0E,UAAU,EACV3B,YAAY;QAAA,IAAAG,eAAA;UAAAhB,OAAA;UAAAZ,MAAA;UAAA6B,OAAA;UAAAC,QAAA;UAAAiC,MAAA,GAAApE,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAAqF,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAnF,IAAA,GAAAmF,SAAA,CAAAlF,IAAA;YAAA;cACZ6C,eAAe,GAAAmC,MAAA,CAAA/C,MAAA,QAAA+C,MAAA,QAAA9C,SAAA,GAAA8C,MAAA,MAAG,IAAI;cACtBnD,OAAO,GAAAmD,MAAA,CAAA/C,MAAA,QAAA+C,MAAA,QAAA9C,SAAA,GAAA8C,MAAA,MAAG,IAAI;cAER/D,MAAM,GAAG,IAAI,CAACwD,iBAAiB,CACnC,eAAe,EACf9E,iBAAiB,EACjBkC,OAAO,EACPwC,UAAU,EACV3B,YAAY,EACZG,eACF,CAAC;cAEKC,OAAO,GAAG;gBACd1B,MAAM,EAAE,iBAAiB;gBACzBH,MAAM,EAANA;cACF,CAAC;cAAAiE,SAAA,CAAAlF,IAAA;cAAA,OAEoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAmC,SAAA,CAAAhF,IAAA;cAAA,OAAAgF,SAAA,CAAA9B,MAAA,WACL,IAAI,CAACC,oBAAoB,CAACN,QAAQ,CAAC;YAAA;YAAA;cAAA,OAAAmC,SAAA,CAAA1E,IAAA;UAAA;QAAA,GAAAuE,QAAA;MAAA,CAC3C;MAAA,SAAAI,kCAAAC,IAAA,EAAAC,IAAA,EAAAC,IAAA;QAAA,OAAAR,kCAAA,CAAAnE,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAuE,iCAAA;IAAA;EAAA;IAAA/F,GAAA;IAAAC,KAAA;MAAA,IAAAkG,iBAAA,GAAAhG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAA+F,SACE/C,mBAAmB;QAAA,IAAAE,iBAAA;UAAAd,OAAA;UAAAZ,MAAA;UAAA6B,OAAA;UAAAC,QAAA;UAAA0C,MAAA,GAAA7E,SAAA;QAAA,OAAApB,mBAAA,GAAAI,IAAA,UAAA8F,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAA5F,IAAA,GAAA4F,SAAA,CAAA3F,IAAA;YAAA;cACnB2C,iBAAiB,GAAA8C,MAAA,CAAAxD,MAAA,QAAAwD,MAAA,QAAAvD,SAAA,GAAAuD,MAAA,MAAG,IAAI;cACxB5D,OAAO,GAAA4D,MAAA,CAAAxD,MAAA,QAAAwD,MAAA,QAAAvD,SAAA,GAAAuD,MAAA,MAAG,IAAI;cAERxE,MAAM,GAAG;gBACbwB,mBAAmB,EAAEA,mBAAmB;gBACxC7B,SAAS,EAAE+B,iBAAiB;gBAC5Bd,OAAO,EAAEA;cACX,CAAC;cAEKiB,OAAO,GAAG;gBACd1B,MAAM,EAAE,yBAAyB;gBACjCH,MAAM,EAANA;cACF,CAAC;cAAA0E,SAAA,CAAA3F,IAAA;cAAA,OAEoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAA4C,SAAA,CAAAzF,IAAA;cAAA,OAAAyF,SAAA,CAAAvC,MAAA,WACLL,QAAQ,CAAC6C,MAAM,CAACC,MAAM;YAAA;YAAA;cAAA,OAAAF,SAAA,CAAAnF,IAAA;UAAA;QAAA,GAAAgF,QAAA;MAAA,CAC9B;MAAA,SAAAM,iBAAAC,IAAA;QAAA,OAAAR,iBAAA,CAAA5E,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAkF,gBAAA;IAAA;EAAA;IAAA1G,GAAA;IAAAC,KAAA;MAAA,IAAA2G,oBAAA,GAAAzG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAwG,SAA0BJ,MAAM;QAAA,IAAA5E,MAAA,EAAA6B,OAAA,EAAAC,QAAA;QAAA,OAAAvD,mBAAA,GAAAI,IAAA,UAAAsG,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAApG,IAAA,GAAAoG,SAAA,CAAAnG,IAAA;YAAA;cACxBiB,MAAM,GAAG;gBAAE4E,MAAM,EAAEA;cAAO,CAAC;cAC3B/C,OAAO,GAAG;gBACd1B,MAAM,EAAE,4BAA4B;gBACpCH,MAAM,EAANA;cACF,CAAC;cAAAkF,SAAA,CAAAnG,IAAA;cAAA,OACoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAoD,SAAA,CAAAjG,IAAA;cAAA,MACR,OAAO,IAAI6C,QAAQ;gBAAAoD,SAAA,CAAAnG,IAAA;gBAAA;cAAA;cAAA,MACf,IAAIlB,cAAc,CAACiE,QAAQ,CAACqD,KAAK,CAAC;YAAA;cAAA,OAAAD,SAAA,CAAA/C,MAAA,WAEnCL,QAAQ,CAAC6C,MAAM;YAAA;YAAA;cAAA,OAAAO,SAAA,CAAA3F,IAAA;UAAA;QAAA,GAAAyF,QAAA;MAAA,CACvB;MAAA,SAAAI,oBAAAC,IAAA;QAAA,OAAAN,oBAAA,CAAArF,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAyF,mBAAA;IAAA;EAAA;IAAAjH,GAAA;IAAAC,KAAA,EAED,SAAA8D,sBACEoD,UAAU,EACVC,EAAE,EACF3E,OAAO,EACPY,mBAAmB,EACnBC,YAAY,EAIZ;MAAA,IAHAC,iBAAiB,GAAA/B,SAAA,CAAAqB,MAAA,QAAArB,SAAA,QAAAsB,SAAA,GAAAtB,SAAA,MAAG,IAAI;MAAA,IACxBgC,aAAa,GAAAhC,SAAA,CAAAqB,MAAA,QAAArB,SAAA,QAAAsB,SAAA,GAAAtB,SAAA,MAAG,IAAI;MAAA,IACpBiC,eAAe,GAAAjC,SAAA,CAAAqB,MAAA,QAAArB,SAAA,QAAAsB,SAAA,GAAAtB,SAAA,MAAG,IAAI;MAEtB,IAAMK,MAAM,GAAG;QACbwB,mBAAmB,EAAEA,mBAAmB;QACxCC,YAAY,EAAEA;MAChB,CAAC;MACD,IAAI6D,UAAU,KAAK,eAAe,EAAE;QAClC,IAAI1E,OAAO,IAAI,IAAI,EAAE;UACnBZ,MAAM,CAAC,QAAQ,CAAC,GAAG;YAAEkB,OAAO,EAAEqE,EAAE;YAAE3E,OAAO,EAAEA;UAAQ,CAAC;QACtD,CAAC,MAAM;UACLZ,MAAM,CAAC,QAAQ,CAAC,GAAG;YAAEkB,OAAO,EAAEqE;UAAG,CAAC;QACpC;MACF,CAAC,MAAM;QACLvF,MAAM,CAAC,QAAQ,CAAC,GAAG;UAAEK,KAAK,EAAEkF;QAAG,CAAC;MAClC;MAEA,IAAI7D,iBAAiB,IAAI,IAAI,EAAE;QAC7B,IAAI8D,cAAc,GAAG,EAAE;QACvB9D,iBAAiB,CAAC+D,OAAO,CAAC,UAACC,aAAa,EAAK;UAC3CF,cAAc,CAACG,IAAI,CAACD,aAAa,CAACE,KAAK,CAAC,CAAC,CAAC;QAC5C,CAAC,CAAC;QACF5F,MAAM,CAAC,WAAW,CAAC,GAAGwF,cAAc;MACtC;MAEA,IAAI7D,aAAa,IAAI,IAAI,EAAE;QACzB3B,MAAM,CAAC,MAAM,CAAC,GAAG2B,aAAa;MAChC;MAEA,IAAIC,eAAe,IAAI,IAAI,EAAE;QAC3B5B,MAAM,CAAC,iBAAiB,CAAC,GAAG4B,eAAe;MAC7C;MAEA,OAAO5B,MAAM;IACf;EAAC;IAAA7B,GAAA;IAAAC,KAAA,EAED,SAAAoF,kBACE8B,UAAU,EACVC,EAAE,EACF3E,OAAO,EACPwC,UAAU,EACV3B,YAAY,EAEZ;MAAA,IADAG,eAAe,GAAAjC,SAAA,CAAAqB,MAAA,QAAArB,SAAA,QAAAsB,SAAA,GAAAtB,SAAA,MAAG,IAAI;MAEtB,IAAMK,MAAM,GAAG;QACboD,UAAU,EAAEA,UAAU;QACtB3B,YAAY,EAAEA;MAChB,CAAC;MACD,IAAI6D,UAAU,KAAK,eAAe,EAAE;QAClC,IAAI1E,OAAO,IAAI,IAAI,EAAE;UACnBZ,MAAM,CAAC,QAAQ,CAAC,GAAG;YAAEkB,OAAO,EAAEqE,EAAE;YAAE3E,OAAO,EAAEA;UAAQ,CAAC;QACtD,CAAC,MAAM;UACLZ,MAAM,CAAC,QAAQ,CAAC,GAAG;YAAEkB,OAAO,EAAEqE;UAAG,CAAC;QACpC;MACF,CAAC,MAAM;QACLvF,MAAM,CAAC,QAAQ,CAAC,GAAG;UAAEK,KAAK,EAAEkF;QAAG,CAAC;MAClC;MACA,IAAI3D,eAAe,IAAI,IAAI,EAAE;QAC3B5B,MAAM,CAAC,iBAAiB,CAAC,GAAG4B,eAAe;MAC7C;MAEA,OAAO5B,MAAM;IACf;EAAC;IAAA7B,GAAA;IAAAC,KAAA,EAED,SAAAgE,qBAAqBN,QAAQ,EAAE;MAC7B,IAAI+D,IAAI,GAAG/D,QAAQ,CAAC6C,MAAM,CAACkB,IAAI;MAC/B,IAAI/F,OAAO,GAAGgC,QAAQ,CAAC6C,MAAM,CAACtE,KAAK;MACnC,IAAIyF,cAAc;MAElB,IAAID,IAAI,KAAKzI,kBAAkB,CAAC2I,OAAO,EAAE;QACvC,IAAIpB,MAAM,GAAG7C,QAAQ,CAAC6C,MAAM,CAACA,MAAM;QACnCmB,cAAc,GAAG,IAAIzI,qBAAqB,CACxCyC,OAAO,EACP,IAAInC,WAAW,CAACgH,MAAM,CACxB,CAAC;MACH,CAAC,MAAM;QACL,IAAIqB,gBAAgB,GAAGlE,QAAQ,CAAC6C,MAAM,CAACqB,gBAAgB;QACvDF,cAAc,GAAG,IAAIxI,uBAAuB,CAC1CwC,OAAO,EACP,IAAIvC,gBAAgB,CAACyI,gBAAgB,CACvC,CAAC;MACH;MACA,OAAOF,cAAc;IACvB;EAAC;IAAA3H,GAAA;IAAAC,KAAA,EAED,SAAA6H,gBAAgBC,MAAM,EAAE;MACtB,IAAIC,UAAU,GAAG,EAAE;MACnBD,MAAM,CAACT,OAAO,CAAC,UAACpF,KAAK,EAAK;QACxB8F,UAAU,CAACR,IAAI,CAAClI,SAAS,CAAC2I,QAAQ,CAAC/F,KAAK,CAAC,CAAC;MAC5C,CAAC,CAAC;MACF,OAAO8F,UAAU;IACnB;EAAC;IAAAhI,GAAA;IAAAC,KAAA;MAAA,IAAAiI,aAAA,GAAA/H,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAA8H,UAAA;QAAA,IAAAzE,OAAA,EAAAC,QAAA;QAAA,OAAAvD,mBAAA,GAAAI,IAAA,UAAA4H,WAAAC,UAAA;UAAA,kBAAAA,UAAA,CAAA1H,IAAA,GAAA0H,UAAA,CAAAzH,IAAA;YAAA;cACQ8C,OAAO,GAAG;gBACd1B,MAAM,EAAE,kBAAkB;gBAC1BH,MAAM,EAAE,CAAC;cACX,CAAC;cAAAwG,UAAA,CAAAzH,IAAA;cAAA,OACoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAA0E,UAAA,CAAAvH,IAAA;cAAA,OAAAuH,UAAA,CAAArE,MAAA,WACL,IAAI,CAAC8D,eAAe,CAACnE,QAAQ,CAAC6C,MAAM,CAACuB,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAM,UAAA,CAAAjH,IAAA;UAAA;QAAA,GAAA+G,SAAA;MAAA,CACpD;MAAA,SAAAG,aAAA;QAAA,OAAAJ,aAAA,CAAA3G,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAA8G,YAAA;IAAA;EAAA;IAAAtI,GAAA;IAAAC,KAAA;MAAA,IAAAsI,gBAAA,GAAApI,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAmI,UAAsBd,IAAI;QAAA,IAAAhE,OAAA,EAAAC,QAAA;QAAA,OAAAvD,mBAAA,GAAAI,IAAA,UAAAiI,WAAAC,UAAA;UAAA,kBAAAA,UAAA,CAAA/H,IAAA,GAAA+H,UAAA,CAAA9H,IAAA;YAAA;cAClB8C,OAAO,GAAG;gBACd1B,MAAM,EAAE,kBAAkB;gBAC1BH,MAAM,EAAE;kBAAE6F,IAAI,EAAEA;gBAAK;cACvB,CAAC;cAAAgB,UAAA,CAAA9H,IAAA;cAAA,OACoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAA+E,UAAA,CAAA5H,IAAA;cAAA,OAAA4H,UAAA,CAAA1E,MAAA,WACL,IAAI,CAAC8D,eAAe,CAACnE,QAAQ,CAAC6C,MAAM,CAACuB,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAW,UAAA,CAAAtH,IAAA;UAAA;QAAA,GAAAoH,SAAA;MAAA,CACpD;MAAA,SAAAG,gBAAAC,IAAA;QAAA,OAAAL,gBAAA,CAAAhH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAmH,eAAA;IAAA;EAAA;IAAA3I,GAAA;IAAAC,KAAA;MAAA,IAAA4I,2BAAA,GAAA1I,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAyI,UAAiCC,eAAe;QAAA,IAAArF,OAAA,EAAAC,QAAA;QAAA,OAAAvD,mBAAA,GAAAI,IAAA,UAAAwI,WAAAC,UAAA;UAAA,kBAAAA,UAAA,CAAAtI,IAAA,GAAAsI,UAAA,CAAArI,IAAA;YAAA;cACxC8C,OAAO,GAAG;gBACd1B,MAAM,EAAE,kBAAkB;gBAC1BH,MAAM,EAAE;kBAAEkB,OAAO,EAAEgG;gBAAgB;cACrC,CAAC;cAAAE,UAAA,CAAArI,IAAA;cAAA,OACoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAAsF,UAAA,CAAAnI,IAAA;cAAA,OAAAmI,UAAA,CAAAjF,MAAA,WACL,IAAI,CAAC8D,eAAe,CAACnE,QAAQ,CAAC6C,MAAM,CAACuB,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAkB,UAAA,CAAA7H,IAAA;UAAA;QAAA,GAAA0H,SAAA;MAAA,CACpD;MAAA,SAAAI,2BAAAC,IAAA;QAAA,OAAAN,2BAAA,CAAAtH,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAA0H,0BAAA;IAAA;EAAA;IAAAlJ,GAAA;IAAAC,KAAA;MAAA,IAAAmJ,iCAAA,GAAAjJ,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAED,SAAAgJ,UAAuCN,eAAe,EAAErB,IAAI;QAAA,IAAAhE,OAAA,EAAAC,QAAA;QAAA,OAAAvD,mBAAA,GAAAI,IAAA,UAAA8I,WAAAC,UAAA;UAAA,kBAAAA,UAAA,CAAA5I,IAAA,GAAA4I,UAAA,CAAA3I,IAAA;YAAA;cACpD8C,OAAO,GAAG;gBACd1B,MAAM,EAAE,kBAAkB;gBAC1BH,MAAM,EAAE;kBAAEkB,OAAO,EAAEgG,eAAe;kBAAErB,IAAI,EAAEA;gBAAK;cACjD,CAAC;cAAA6B,UAAA,CAAA3I,IAAA;cAAA,OACoB,IAAI,CAACM,IAAI,CAACiB,IAAI,CAACuB,OAAO,CAAC;YAAA;cAAxCC,QAAQ,GAAA4F,UAAA,CAAAzI,IAAA;cAAA,OAAAyI,UAAA,CAAAvF,MAAA,WACL,IAAI,CAAC8D,eAAe,CAACnE,QAAQ,CAAC6C,MAAM,CAACuB,MAAM,CAAC;YAAA;YAAA;cAAA,OAAAwB,UAAA,CAAAnI,IAAA;UAAA;QAAA,GAAAiI,SAAA;MAAA,CACpD;MAAA,SAAAG,iCAAAC,IAAA,EAAAC,IAAA;QAAA,OAAAN,iCAAA,CAAA7H,KAAA,OAAAC,SAAA;MAAA;MAAA,OAAAgI,gCAAA;IAAA;EAAA;EAAA,OAAA7J,aAAA;AAAA;AAAA,SAGYgK,wBAAwBA,CAAAC,IAAA,EAAAC,IAAA;EAAA,OAAAC,yBAAA,CAAAvI,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAsI,0BAAA;EAAAA,yBAAA,GAAA3J,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAvC,SAAA0J,UAAwCxJ,iBAAiB,EAAEX,MAAM;IAAA,IAAAoK,QAAA;IAAA,OAAA5J,mBAAA,GAAAI,IAAA,UAAAyJ,WAAAC,UAAA;MAAA,kBAAAA,UAAA,CAAAvJ,IAAA,GAAAuJ,UAAA,CAAAtJ,IAAA;QAAA;UAC3DoJ,QAAQ,GAAG,IAAIrK,aAAa,CAACC,MAAM,CAAC;UAAAsK,UAAA,CAAAtJ,IAAA;UAAA,OAClCoJ,QAAQ,CAAC3I,IAAI,CAACd,iBAAiB,CAAC;QAAA;UAAA,OAAA2J,UAAA,CAAAlG,MAAA,WAC/BgG,QAAQ;QAAA;QAAA;UAAA,OAAAE,UAAA,CAAA9I,IAAA;MAAA;IAAA,GAAA2I,SAAA;EAAA,CAChB;EAAA,OAAAD,yBAAA,CAAAvI,KAAA,OAAAC,SAAA;AAAA;AAED2I,MAAM,CAACC,OAAO,GAAGT,wBAAwB"},"metadata":{},"sourceType":"script","externalDependencies":[]}